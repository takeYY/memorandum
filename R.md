# Rに関するまとめ
統計解析ソフト「R」に関してまとめたもの

## 基本的な使い方
- 現在のディレクトリを表示
```
getwd()
```

- csvファイルの読み込み
```
csv_file = read.csv("ファイル名")
```

- それぞれのコラムでグラフ化
```
plot(csv_file)
```

## １次元配列データの扱い（ベクトル）
- `1:9`
    初項1,　末項9のベクトル（integerクラス）
    ```r
    [1] 1 2 3 4 5 6 7 8 9
    ```
- `vec = 1:9`
    代入演算子(<-)
    ```r
    > vec
    [1] 1 2 3 4 5 6 7 8 9
    ```
- `c(1,3,5)`
    c関数を用いたベクトルの生成（numericクラス）
    ```r
    [1] 1 3 5
    ```
- `seq(0,10)`
    初項0,　末項10,　等差1のベクトル
    ```r
    [1] 0 1 2 3 4 5 6 7 8 9 10
    ```
- `seq(0,10,2)`
    初項0,　末項10,　等差2のベクトル
    ```r
    [1] 0 2 4 6 8 10
    ```
- `seq(0,10,length=100)`
    初項0,　末項10,　長さ100のベクトル
    ```r
    [1]  0.0000000  0.1010101  0.2020202  0.3030303  0.4040404  0.5050505  0.6060606  0.7070707
    [9]  0.8080808  0.9090909  1.0101010  1.1111111  1.2121212  1.3131313  1.4141414  1.5151515
    [17]  1.6161616  1.7171717  1.8181818  1.9191919  2.0202020  2.1212121  2.2222222  2.3232323
    [25]  2.4242424  2.5252525  2.6262626  2.7272727  2.8282828  2.9292929  3.0303030  3.1313131
    [33]  3.2323232  3.3333333  3.4343434  3.5353535  3.6363636  3.7373737  3.8383838  3.9393939
    [41]  4.0404040  4.1414141  4.2424242  4.3434343  4.4444444  4.5454545  4.6464646  4.7474747
    [49]  4.8484848  4.9494949  5.0505051  5.1515152  5.2525253  5.3535354  5.4545455  5.5555556
    [57]  5.6565657  5.7575758  5.8585859  5.9595960  6.0606061  6.1616162  6.2626263  6.3636364
    [65]  6.4646465  6.5656566  6.6666667  6.7676768  6.8686869  6.9696970  7.0707071  7.1717172
    [73]  7.2727273  7.3737374  7.4747475  7.5757576  7.6767677  7.7777778  7.8787879  7.9797980
    [81]  8.0808081  8.1818182  8.2828283  8.3838384  8.4848485  8.5858586  8.6868687  8.7878788
    [89]  8.8888889  8.9898990  9.0909091  9.1919192  9.2929293  9.3939394  9.4949495  9.5959596
    [97]  9.6969697  9.7979798  9.8989899 10.0000000
    ```
- `rep(vec, times=3)`
    繰り返す要素を持つベクトルの生成
    ```r
    [1] 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9
    ```
- `class(vec)`
    型を出力
    ```r
    [1] "integer"
    ```
- `c(vec,c(1:4))`
    ベクトル同士の接続
    ```r
    [1] 1 2 3 4 5 6 7 8 9 1 2 3 4
    ```
- `cha = c("t","a","k","e","Y","Y")`
    characterクラス
    ```r
    > cha
    [1] "t" "a" "k" "e" "Y" "Y"
    ```
- `x = c(3,4,"a","b")`
    3と4がcharacterクラスとなる
    ```r
    > x
    [1] "3" "4" "a" "b"
    ```
- `table(cha)`
    頻度集計（アスキーコード順）
    ```r
    cha
    a e k t Y
    1 1 1 1 2
    ```
- `fac = factor(cha, levels = c("t","a","k","e","Y"))`
    要素をグループ化
    ```r
    > fac
    [1] t a k e Y Y
    Levels: t a k e Y
    ```
- `table(fac)`
    factorクラス
    ```r
    fac
    t a k e Y
    1 1 1 1 2
    ```
- `fac = factor(cha,levels = c("X","t","a","k","e","Y"))`
    データにないXもレベルに追加できる
    ```r
    > fac
    [1] t a k e Y Y
    Levels: X t a k e Y
    ```
- `table(fac)`
    データにないXも集計対象にできる
    ```r
    fac
    X t a k e Y
    0 1 1 1 1 2
    ```
- `barplot(table(cha))`
    棒グラフ（a,e,k,t,Yの順）
    ![](https://i.imgur.com/ELiu2MD.png)
- `barplot(table(fac))`
    棒グラフ（X,t,a,k,e,Yの順）
    ![](https://i.imgur.com/TtZUzMO.png)

## 2次元配列データの扱い（データフレーム）
- `num = c(1,3,5,7)`
    numericクラス
- `cha = c("a","a","c","d")`
    characterクラス
- `df = data.frame(num,cha)`
    ベクトルの列結合
    ```r
    > df
      num cha
    1   1   a
    2   3   a
    3   5   c
    4   7   d
    ```
- `class(df)`
    data.frameクラス
    ```r
    [1] "data.frame"
    ```
- `str(df)`
    str関数でデータ構造の検査
    characterはfactorに強制変換
    ```r
    'data.frame':	4 obs. of  2 variables:
    $ num: num  1 3 5 7
    $ cha: Factor w/ 3 levels "a","c","d": 1 1 2 3
    ```
- `df = data.frame(num,cha,stringsAsFactors=FALSE)`
    ```r
    > df
      num cha
    1   1   a
    2   3   a
    3   5   c
    4   7   d
    ```
- `writes.csv(df,"test.csv")`
    データの書き出し
- `df2 = read.csv("test.csv")`
    test.csvを読み込んでdf2に代入
    文字列はfactor優先
    
## 抽出演算子と比較演算子
- `vec = c("a","b","c","d","e")`
    文字列ベクトルの生成
- `vec[1]`
    演算子
    ```r
    [1] "a"
    ```
- `vec[c(1,3,5)]`
    データの抽出
    ```r
    [1] "a" "c" "e"
    ```
- `vec[c(2,4)] <- "f"`
    データの置換（<-であることに注意）
    ```r
    > vec
    [1] "a" "f" "c" "f" "e"
    ```
- `vec == "f"`
    論理演算子
    ```r
    [1] FALSE TRUE FALSE TRUE FALSE
    ```
- `cond = vec == "f"`
    論理値ベクトルの生成
    ```r
    > cond
    [1] FALSE TRUE FALSE TRUE FALSE
    ```
- `class(cond)`
    logicalクラス
    ```r
    [1] "logical"
    ```
- `vec[cond]`
    論理値ベクトルを用いた抽出
    ```r
    [1] "f" "f"
    ```
- `vec[vec=="f"]`
    条件式を直接入れても良い
    ```r
    [1] "f" "f"
    ```
- `num = round(seq(1,4,length=26))`
    round関数で四捨五入
    ```r
    > num
    [1] 1 1 1 1 1 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 4 4 4 4 4
    ```
- `cha = letters`
    コンスタントオブジェクトの利用
    ```r
    > cha
    [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w"
    [24] "x" "y" "z"
    ```
- `df = data.frame(num,cha)`
    データフレームの生成
    ```r
    > df
       num cha
    1    1   a
    2    1   b
    3    1   c
    4    1   d
    5    1   e
    6    2   f
    7    2   g
    8    2   h
    9    2   i
    10   2   j
    11   2   k
    12   2   l
    13   2   m
    14   3   n
    15   3   o
    16   3   p
    17   3   q
    18   3   r
    19   3   s
    20   3   t
    21   3   u
    22   4   v
    23   4   w
    24   4   x
    25   4   y
    26   4   z
    ```
- `df[1,1]`
    １行１列目のみ抽出
    ```r
    [1] 1
    ```
- `df[1,]`
    １行目のみ抽出
    ```r
       num cha
    1    1   a
    ```
- `df[1:5,]`
    １〜５行目を抽出
    ```r
       num cha
    1    1   a
    2    1   b
    3    1   c
    4    1   d
    5    1   e
    ```
- `df[,2]`
    ２列目のみ抽出
    ```r
    [1] a b c d e f g h i j k l m n o p q r s t u v w x y z
    Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z
    ```
- `df[df[,1] == 3,]`
    １列目が3のデータのみ抽出
    ```r
       num cha
    14   3   n
    15   3   o
    16   3   p
    17   3   q
    18   3   r
    19   3   s
    20   3   t
    21   3   u
    ```
- `df[df$num == 4,]`
    num列が4のデータのみ抽出
    ```r
       num cha
    22   4   v
    23   4   w
    24   4   x
    25   4   y
    26   4   z
    ```

## plot関数を用いた散布図の描画

## 主要なRオブジェクトのデータ構造
![](https://i.imgur.com/bmEfoTk.png)

###### tags: `program` `プログラミング` `data` `データ` `解析` `R` `ソフト` `統計`
